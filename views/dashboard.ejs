<!DOCTYPE html>
<html lang="en"></html>
  <head>
    <title>Dashboard</title>
  </head>
  <body>

    <% if (success_msg) { %>
      <div style="color: green; border: 1px solid green; padding: 10px; margin-bottom: 15px;">
        <%= success_msg %>
      </div>
    <% } %>

    <% if (error_msg) { %>
      <div style="color: red; border: 1px solid red; padding: 10px; margin-bottom: 15px;">
        <%= error_msg %>
      </div>
    <% } %>

    <h1>Welcome to your Dashboard, <%= user.username %>!</h1>

    <p>Your user ID is: <%= user.id %></p>

    <form action="/logout" method="POST">
      <button type="submit">Log Out</button>
    </form>


    <hr>

    <h2>Create New Folder</h2>
    <form action="/folders" method="POST">
      <input type="text" name="folderName" placeholder="Folder Name" required>
      <button type="submit">Create</button>
    </form>

    <h2>Folders</h2>
    <ul>
      <% if (folders.length > 0) { %>
        <% folders.forEach(folder => { %>
          <li>
            <a href="/folders/<%= folder.id %>">
              <%= folder.name %>
            </a>
            (Created: <%= folder.createdAt.toDateString() %>)
          </li>
        <% }) %>
      <% } else { %>
        <li>No folders available.</li>
      <% } %>
    </ul>

    <hr>
    <h2>Upload File to Root</h2>
    <form action="/files/upload" method="POST" enctype="multipart/form-data">
      <input type="file" name="file" required>
      <button type="submit">Upload File</button>
    </form>

    <h2>Files</h2>
    <ul>
      <% if (files.length > 0) { %>
      <% files.forEach(file => { %>
        <li>
        <a href="/files/<%= file.id %>">
          <%= file.name %>
        </a>
        (<%= file.mimetype %>)
        </li>
      <% }) %>
      <% } else { %>
      <li>No files available.</li>
      <% } %>
    </ul>
  </body>
</html>
